DROP DATABASE dboracle;
CREATE DATABASE dboracle;
 

/*  ######################
Defects table to insert transaction data */

CREATE TABLE defects(
id int NOT NULL AUTO_INCREMENT,
machineNo VARCHAR (100),
dt TIMESTAMP,
status VARCHAR (100),
A INT,
A1 INT,
A2 INT,
B INT,
B1 INT,
B2 INT,
B3 INT,
B4 INT,
B5 INT,
B6 INT,
C INT,
C1 INT,
C2 INT,
E1 INT,
E2 INT,
H INT,
H1 INT,
H2 INT,
H3 INT,
H4 INT,
S1 INT,
S2 INT,
S3 INT,
S4 INT,
T INT,
TT INT,
V1 INT,
V2 INT,
V3 INT,
V4 INT,
total INT,
PRIMARY KEY (id)
)Engine=InnoDB;

/* ######################
defecttypes includes defects like frayed yearn and drop stitch */


/* DROP TABLE defecttypes; */

CREATE TABLE defecttypes(
defecttypeid int NOT NULL,
defecttype VARCHAR (50),
notifyinguserid1 int,
defectcountmargin1 int,
notifyinguserid2 int,
defectcountmargin2 int,
notifyinguserid3 int,
defectcountmargin3 int,
notifyinguserid4 int,
defectcountmargin4 int,
PRIMARY KEY (defecttypeid)
)Engine=InnoDB;



/* ######################
NotifyingUsers includes users infrrmation who will be sent notfications */

/* DROP TABLE notifyingusers; */

CREATE TABLE notifyingusers(
notifyinguserid int NOT NULL AUTO_INCREMENT,
username VARCHAR (50),
contactnumber VARCHAR (50),
email VARCHAR (50),
PRIMARY KEY (notifyinguserid)
)Engine=InnoDB;


/* ######################
Downtimecategory includes all possible downtimes like No reason selected and Vector error */

/* DROP TABLE downtimereason; */

CREATE TABLE downtimereason(
downtimeid int NOT NULL,
description VARCHAR (50),
downtimetype VARCHAR (50),
notifyinguserid1 int,
downtimenotifytime1 int,
notifyinguserid2 int,
downtimenotifytime2 int,
notifyinguserid3 int,
downtimenotifytime3 int,
notifyinguserid4 int,
downtimenotifytime4 int,
PRIMARY KEY (downtimeid)
)Engine=InnoDB;

/* ######################
Downtimes includes downtime transaction records received from R-Pi */

/* DROP TABLE downtimes; */

CREATE TABLE downtimes(
downtimeid int NOT NULL AUTO_INCREMENT,
downtimetypeid int,
machineno VARCHAR (50),
stoptime TIMESTAMP,
starttime TIMESTAMP,
reason VARCHAR(100),
PRIMARY KEY (downtimeid)
)Engine=InnoDB;


/* ######################
Machine Status table will be updated by Hansa*/

/* DROP TABLE machinestatus; */
CREATE TABLE machinestatus(
machineno VARCHAR (50) NOT NULL,
status VARCHAR (50),
PRIMARY KEY (machineno)
)Engine=InnoDB;

/* ######################
Table to store android tokens*/

/* DROP TABLE androidtokens; */
CREATE TABLE androidtokens(
tabid int NOT NULL AUTO_INCREMENT,
imei_number VARCHAR (20),
token VARCHAR (300),
PRIMARY KEY (tabid),
UNIQUE KEY (token),
UNIQUE KEY (imei_number)
)Engine=InnoDB;


/* ######################
Table to store style configuration data i.e area location*/

/* DROP TABLE styledata; */
CREATE TABLE styledata(
style_id int NOT NULL AUTO_INCREMENT,
styleNumber VARCHAR (300) NOT NULL ,
imageLocation VARCHAR (500) NOT NULL,
areaList VARCHAR (500) NOT NULL,
dataTableName VARCHAR(20) NOT NULL,
PRIMARY KEY (style_id),
UNIQUE KEY (imageLocation)
)Engine=InnoDB;


/* ######################
Table to store Planning data*/

/* DROP TABLE planningdata; */
CREATE TABLE planningdata(
id int NOT NULL AUTO_INCREMENT,
styleNumber VARCHAR (300) NOT NULL,
salesOrder VARCHAR (50),
lineItem int,
sideAndColor  VARCHAR (50),
machineNumber VARCHAR (50),
orderStart TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
orderEnd TIMESTAMP NOT NULL,
plannedQuantity int,
knittedQuantity int DEFAULT 0,
size float(4,2),
section VARCHAR (50),
orderState VARCHAR(10) DEFAULT 'incomplete',
PRIMARY KEY (id)
)Engine=InnoDB;

/* ######################
Table to store TabMachineAllocation data*/

/* DROP TABLE tabmachineallocation; */
CREATE TABLE tabmachineallocation(
id int NOT NULL AUTO_INCREMENT,
timeadded TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
tabid int NOT NULL,
machine1 VARCHAR (50) DEFAULT 'null',
machine2 VARCHAR (50) DEFAULT 'null',
machine3 VARCHAR (50) DEFAULT 'null',
machine4 VARCHAR (50) DEFAULT 'null',
machine5 VARCHAR (50) DEFAULT 'null',
machine6 VARCHAR (50) DEFAULT 'null',
machine7 VARCHAR (50) DEFAULT 'null',
machine8 VARCHAR (50) DEFAULT 'null',
machine9 VARCHAR (50) DEFAULT 'null',
machine10 VARCHAR (50) DEFAULT 'null',
PRIMARY KEY (id)
)Engine=InnoDB;


/* DROP TABLE team_members; */

CREATE TABLE team_members(
epf_no int NOT NULL,
team_member_name VARCHAR(100),
password VARCHAR(50),
shift VARCHAR (50),
image_location VARCHAR(100),
PRIMARY KEY (epf_no)
)Engine=InnoDB;

