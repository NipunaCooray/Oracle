DROP DATABASE dboracle;
CREATE DATABASE dboracle;

USE dboracle;

/*  ######################
Defects table to insert transaction data */

CREATE TABLE defects(
id int NOT NULL AUTO_INCREMENT,
machineNo VARCHAR (100),
dt VARCHAR (100),
status INT,
A INT,
A1 INT,
A2 INT,
B INT,
B1 INT,
B2 INT,
B3 INT,
B4 INT,
B5 INT,
B6 INT,
C INT,
C1 INT,
C2 INT,
E1 INT,
E2 INT,
H INT,
H1 INT,
H2 INT,
H3 INT,
H4 INT,
S1 INT,
S2 INT,
S3 INT,
S4 INT,
T INT,
TT INT,
V1 INT,
V2 INT,
V3 INT,
V4 INT,
total INT,
PRIMARY KEY (id)
)Engine=InnoDB;

/* ######################
defecttypes includes defects like frayed yearn and drop stitch */


/* DROP TABLE defecttypes; */

CREATE TABLE defecttypes(
defecttypeid int NOT NULL,
defecttype VARCHAR (50),
notifyinguserid1 int,
defectcountmargin1 int,
notifyinguserid2 int,
defectcountmargin2 int,
notifyinguserid3 int,
defectcountmargin3 int,
notifyinguserid4 int,
defectcountmargin4 int,
PRIMARY KEY (defecttypeid)
)Engine=InnoDB;



/* ######################
NotifyingUsers includes users infrrmation who will be sent notfications */

/* DROP TABLE notifyingusers; */

CREATE TABLE notifyingusers(
notifyinguserid int NOT NULL AUTO_INCREMENT,
username VARCHAR (50),
contactnumber VARCHAR (50),
email VARCHAR (50),
PRIMARY KEY (notifyinguserid)
)Engine=InnoDB;


/* ######################
Downtimecategory includes all possible downtimes like No reason selected and Vector error */

/* DROP TABLE downtimereason; */

CREATE TABLE downtimereason(
downtimeid int NOT NULL,
description VARCHAR (50),
downtimetype VARCHAR (50),
notifyinguserid1 int,
downtimenotifytime1 int,
notifyinguserid2 int,
downtimenotifytime2 int,
notifyinguserid3 int,
downtimenotifytime3 int,
notifyinguserid4 int,
downtimenotifytime4 int,
PRIMARY KEY (downtimeid)
)Engine=InnoDB;

/* ######################
Downtimes includes downtime transaction records received from R-Pi */

/* DROP TABLE downtimes; */

CREATE TABLE downtimes(
downtimeid int NOT NULL AUTO_INCREMENT,
downtimetypeid int,
machineno VARCHAR (50),
stoptime TIMESTAMP,
starttime TIMESTAMP,
reason VARCHAR(100),
PRIMARY KEY (downtimeid)
)Engine=InnoDB;


/* ######################
Machine Status table will be updated by Hansa*/

/* DROP TABLE machinestatus; */
CREATE TABLE machinestatus(
machineno VARCHAR (50) NOT NULL,
status VARCHAR (50),
PRIMARY KEY (machineno)
)Engine=InnoDB;



